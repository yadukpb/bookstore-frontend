{"ast":null,"code":"const retrieveSigningKeys = require('../utils').retrieveSigningKeys;\n\n/**\n * Uses getKeysInterceptor to allow users to retrieve keys from a file,\n * external cache, or provided object before falling back to the jwksUri endpoint\n */\nfunction getKeysInterceptor(client, _ref) {\n  let {\n    getKeysInterceptor\n  } = _ref;\n  const getSigningKey = client.getSigningKey.bind(client);\n  return async kid => {\n    const keys = await getKeysInterceptor();\n    let signingKeys;\n    if (keys && keys.length) {\n      signingKeys = await retrieveSigningKeys(keys);\n    }\n    if (signingKeys && signingKeys.length) {\n      const key = signingKeys.find(k => !kid || k.kid === kid);\n      if (key) {\n        return key;\n      }\n    }\n    return getSigningKey(kid);\n  };\n}\nmodule.exports.default = getKeysInterceptor;","map":{"version":3,"names":["retrieveSigningKeys","require","getKeysInterceptor","client","getSigningKey","bind","kid","keys","signingKeys","length","key","find","k","module","exports","default"],"sources":["/home/yadu/Music/Gifty/node_modules/jwks-rsa/src/wrappers/interceptor.js"],"sourcesContent":["const retrieveSigningKeys = require('../utils').retrieveSigningKeys;\n\n/**\n * Uses getKeysInterceptor to allow users to retrieve keys from a file,\n * external cache, or provided object before falling back to the jwksUri endpoint\n */\nfunction getKeysInterceptor(client, { getKeysInterceptor }) {\n  const getSigningKey = client.getSigningKey.bind(client);\n\n  return async (kid) => {\n    const keys = await getKeysInterceptor();\n\n    let signingKeys;\n    if (keys && keys.length) {\n      signingKeys = await retrieveSigningKeys(keys);\n    }\n\n    if (signingKeys && signingKeys.length) {\n      const key = signingKeys.find(k => !kid || k.kid === kid);\n\n      if (key) {\n        return key;\n      }\n    }\n\n    return getSigningKey(kid);\n  };\n}\n\nmodule.exports.default = getKeysInterceptor;\n"],"mappings":"AAAA,MAAMA,mBAAmB,GAAGC,OAAO,CAAC,UAAU,CAAC,CAACD,mBAAmB;;AAEnE;AACA;AACA;AACA;AACA,SAASE,kBAAkB,CAACC,MAAM,QAA0B;EAAA,IAAxB;IAAED;EAAmB,CAAC;EACxD,MAAME,aAAa,GAAGD,MAAM,CAACC,aAAa,CAACC,IAAI,CAACF,MAAM,CAAC;EAEvD,OAAO,MAAOG,GAAG,IAAK;IACpB,MAAMC,IAAI,GAAG,MAAML,kBAAkB,EAAE;IAEvC,IAAIM,WAAW;IACf,IAAID,IAAI,IAAIA,IAAI,CAACE,MAAM,EAAE;MACvBD,WAAW,GAAG,MAAMR,mBAAmB,CAACO,IAAI,CAAC;IAC/C;IAEA,IAAIC,WAAW,IAAIA,WAAW,CAACC,MAAM,EAAE;MACrC,MAAMC,GAAG,GAAGF,WAAW,CAACG,IAAI,CAACC,CAAC,IAAI,CAACN,GAAG,IAAIM,CAAC,CAACN,GAAG,KAAKA,GAAG,CAAC;MAExD,IAAII,GAAG,EAAE;QACP,OAAOA,GAAG;MACZ;IACF;IAEA,OAAON,aAAa,CAACE,GAAG,CAAC;EAC3B,CAAC;AACH;AAEAO,MAAM,CAACC,OAAO,CAACC,OAAO,GAAGb,kBAAkB"},"metadata":{},"sourceType":"script","externalDependencies":[]}